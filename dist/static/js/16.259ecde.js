(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{337:function(t,e,n){"use strict";n.r(e);var a=n(864),o=n(458);for(var r in o)"default"!==r&&function(t){n.d(e,t,(function(){return o[t]}))}(r);n(692);var s=n(10),u=Object(s.a)(o.default,a.a,a.b,!1,null,null,null);u.options.__file="src/components/management/authorization.vue",e.default=u.exports},384:function(t,e,n){"use strict";var a=n(12);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(n(385)),r={Common:{sityList:function(t){return o.default.post("/base/city/list.do",t)}},adGroup:{add:function(t){return o.default.post("/ad/group/add.do",t)},get:function(t){return o.default.post("/ad/group/list.do",t)},update:function(t){return o.default.post("/ad/group/update.do",t)},updateStatus:function(t){return o.default.post("/ad/group/update/status.do",t)}},adPlan:{add:function(t){return o.default.post("/ad/plan/add.do",t)},get:function(t){return o.default.post("/ad/plan/list.do",t)},update:function(t){return o.default.post("/ad/plan/update.do",t)},updateStatus:function(t){return o.default.post("/ad/plan/update/status.do",t)}},adIdea:{add:function(t){return o.default.post("/ad/idea/add.do",t)},get:function(t){return o.default.post("/ad/idea/list.do",t)},update:function(t){return o.default.post("/ad/idea/update.do",t)},updateStatus:function(t){return o.default.post("/ad/idea/update/status.do",t)}},User:{info:function(){return o.default.get("/account/info")}},Dict:{get:function(){return o.default.get("/dict")}},Home:{getMessageList:function(){return o.default.get("/home/messages")}},Account:{menus:function(){return o.default.get("/getmenuList")}},Login:{login:function(t){return o.default.post("/pub/login.do",t)},logout:function(t){return o.default.post("/logout",t)}},Management:{users:function(t){return o.default.get("/management/users",t)},roles:function(t){return o.default.get("/management/roles",t)}},Library:{getLibrary:function(t){return o.default.post("/ad/library/list.do",t)},deleteLibrary:function(t){return o.default.post("/ad/library/delete.do",t)},getAdType:function(t){return o.default.post("/base/ad/type/list.do",t)},addViews:function(t){return o.default.post("/ad/idea/view/add.do",t)},removeView:function(t){return o.default.post("/ad/idea/view/delete.do",t)},getView:function(t){return o.default.post("/ad/idea/view/list.do",t)},getIdea:function(t){return o.default.post("/ad/idea/get.do",t)},getViews:function(t){return o.default.post("/ad/idea/style/views.do",t)}}};e.default=r},385:function(t,e,n){"use strict";(function(t,a){var o=n(12);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(n(396)),s=o(n(397)),u=o(n(79)),i={repeatable:!0};r.default.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",r.default.defaults.baseURL=t.get("env").apiDomin;var d={PREFIX:"",Author:u.default.getAuthor()||"fanjiantao",requestingApi:new Set,extractUrl:function(t){return t?t.split("?")[0]:""},isRequesting:function(t){var e=this.extractUrl(t);return this.requestingApi.has(e)},addRequest:function(t){var e=this.extractUrl(t);this.requestingApi.add(e)},deleteRequest:function(t){var e=this.extractUrl(t);this.requestingApi.delete(e)},get:function(t,e,n){var a={url:t,method:"GET"};return e&&(a.params=e),this.ajax(a,n)},post:function(t,e,n){var a={url:t,method:"POST"},o={body:e,header:{token:u.default.getCookie("token"),cmdType:"1"}};return e&&(a.data=JSON.stringify(o)),this.ajax(a,n)},postJson:function(t,e,n){return this.ajax({url:t,method:"POST",data:e},n)},patchJson:function(t,e,n,a){return this.ajax({url:t,method:"PATCH",data:e},a)},delete:function(t,e){return this.ajax({url:t,method:"DELETE"},e)},ajax:function(t,e){var n=u.default.extend({},i,t,e||{});n.crossDomain=0===n.url.indexOf("http");var o=n.url;if(n.crossDomain||(o=n.url=this.PREFIX+n.url),"GET"!=n.method){if(this.isRequesting(o))return new Promise((function(t,e){t({ok:!1,msg:"重复请求"})}));!1===n.repeatable&&this.addRequest(o)}var d={headers:{"Content-Type":"application/x-www-form-urlencoded"},responseType:"json",validateStatus:function(t){return!0},paramsSerializer:function(t){return s.default.stringify(t,{allowDots:!0})}};n.crossDomain&&(d.headers={});var l=this;return n=u.default.extend({},d,n),new Promise((function(t){return r.default.request(n).then((function(e){l.deleteRequest(n.url);var o=e.data,r=e.status;if(200!=r){if(401==r)return void(window.top.location="/login");500==r?a.$Message.error("后台异常"):404==r?a.$Message.error("请求不存在"):200!=r&&a.$Message.error(o._msg||"请求异常")}-2==o.code&&(u.default.clearCookie(),window.location.href("/")),o.ok=0==o.code,o.ok||a.$Message.error(o.msg),t(o)})).catch((function(){l.deleteRequest(n.url),t({ok:!1})}))}))}};e.default=d}).call(this,n(80),n(81))},458:function(t,e,n){"use strict";n.r(e);var a=n(459),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,(function(){return a[t]}))}(r);e.default=o.a},459:function(t,e,n){"use strict";(function(t,a,o){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(146),s=(n(687),{data:function(){return{role:null,roles:[],menuOption:{datas:r.fullMenus},userOption:{datas:r.fullMenus},menus:[],users:null}},mounted:function(){this.init()},methods:{addTab:function(t){this.$refs.user.appendTreeItem(this.users,{title:"ADD",key:Math.random().toString(16).slice(2)})},removeTab:function(){this.$refs.user.removeTreeItem(this.users)},init:function(){this.$refs.menu.expandAll(),this.getRoles()},changeRole:function(t){this.role=t,this.getData(t)},getRoles:function(){var e=this;t.Management.roles().then((function(t){t.ok&&(e.roles=t.body,e.roles.length&&(e.role=e.roles[0],e.getData()))}))},getData:function(){this.menus=a.get("SYS_MENUS")},save:function(){console.log(this.menus,this.roles),o.saveLocal("SYS_CONFIG_MENU",this.menus),this.$Message.success("保存成功"),a.trigger("SYS_MENU_REFRESH")}},computed:{}});e.default=s}).call(this,n(384).default,n(80),n(79).default)},460:function(t,e,n){},692:function(t,e,n){"use strict";var a=n(460);n.n(a).a},864:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return o}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"authorization-vue frame-page h-panel"},[t._m(0),t._v(" "),n("div",{staticClass:"h-panel-body"},[n("div",{staticClass:"authorization-frame"},[n("div",{staticClass:"role-container"},[n("div",{staticStyle:{margin:"20px 10px"}},[n("Button",{attrs:{color:"primary",size:"s"},on:{click:t.addTab}},[t._v("添加角色")]),t._v(" "),n("Button",{attrs:{size:"s"},on:{click:t.removeTab}},[t._v("删除角色")])],1),t._v(" "),t._l(t.roles,(function(e){return n("div",{key:e.id,staticClass:"role-item",class:{selected:t.role==e},on:{click:function(n){return t.changeRole(e)}}},[n("p",{staticClass:"title"},[t._v(t._s(e.name))]),t._v(" "),n("p",{staticClass:"desc"},[t._v(t._s(e.description))])])}))],2),t._v(" "),n("div",{staticClass:"menu-container"},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("Button",{attrs:{color:"primary",size:"s"},on:{click:function(e){t.$refs.menu.chooseAll(),t.$refs.menu.expandAll()}}},[t._v("所有权限")]),t._v(" "),n("Button",{attrs:{size:"s"},on:{click:function(e){t.menus=[]}}},[t._v("清空所有")])],1),t._v(" "),n("Tree",{ref:"menu",attrs:{option:t.menuOption,multiple:"","choose-mode":"some"},model:{value:t.menus,callback:function(e){t.menus=e},expression:"menus"}})],1),t._v(" "),n("div",{staticClass:"users-container",staticStyle:{background:"#eee"}},[n("div",{staticStyle:{"margin-bottom":"10px"}},[n("Button",{attrs:{color:"primary",size:"s"},on:{click:t.addTab}},[t._v("添加菜单")]),t._v(" "),n("Button",{attrs:{color:"primary",size:"s"},on:{click:t.addTab}},[t._v("添加接口")]),t._v(" "),n("Button",{attrs:{size:"s"},on:{click:t.removeTab}},[t._v("删除菜单")])],1),t._v(" "),n("Tree",{ref:"user",attrs:{option:t.userOption,toggleOnSelect:!0},model:{value:t.users,callback:function(e){t.users=e},expression:"users"}})],1)]),t._v(" "),n("div",{staticClass:"text-left"},[n("Button",{attrs:{color:"primary"},on:{click:t.save}},[t._v("保存角色权限")]),t._v(" "),n("Button",{on:{click:t.getData}},[t._v("重置")])],1)])])},o=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"h-panel-bar"},[e("span",{staticClass:"h-panel-title"},[this._v("权限管理")]),this._v(" "),e("span",{staticClass:"dark2-color"},[this._v("保存示例是存储在Local Storage中，可通过清空 Local Storage 属性 SYS_CONFIG_MENU 重置菜单")])])}];a._withStripped=!0}}]);